# 스레드

<br>

## 스레드란?

### 정의

- 프로세스의 실행 단위
- 프로세스는 최소 한 개 이상의 스레드를 가지며, 이를 메인 스레드라 함

### 역할

- 프로세스보다 가벼워서 생성 및 제거가 용이함
    - 프로세스를 생성할 때 메모리 할당에 많은 자원이 필요함.
- 프로세스의 **처리 속도**를 높이기 위해 하나의 프로세스가 수행해야 할 작업을 스레드가 나누어 수행할 수 있도록 한다.
    - ex) 1개의 프로세스 내에 2개의 스레드가 존재한다면 이는 2개의 프로세스와 같은 처리속도를 낸다.
    - 모든 스레드는 프로세스의 메모리 공간을 공유하기에 빠름

### 구조

<img width="600" src="https://user-images.githubusercontent.com/71180414/148265309-db94d90a-58e0-45cf-ae40-6d86ca8710fc.png">

- 스레드는 프로세스 내에서 코드, 데이터, 힙 영역을 공유한다.
- 스택 영역과 레지스터은 각 스레드마다 따로 할당 받는다.

<br>

## 멀티 프로세스와 멀티 스레드

### 멀티 프로세스

- **정의**
    - 하나의 프로그램을 여러개의 프로세스로 구성
    - 각 프로세스가 하나의 task를 맡아서 수행
- **장점**
    - 자식 프로세스에 문제가 생겨도 다른 프로세스에 영향이 가지 않음
- **단점**
    - 프로세스간 메모리를 공유할 수 없기에 문맥교환이 발생 -> 오버헤드 발생
    - 프로세스간 통신 비용이 큼

### 멀티 스레드

- **정의**
    - 하나의 프로세스를 여러개의 스레드로 구성
    - 각 스레드가 하나의 task를 맡아서 수행
- **장점**
    - 프로세스 **메모리를 공유**하므로 자원 소모가 줄어듬
    - 스레드간 통신 비용이 적어 문맥교환에 용이 (스택 영역만 변경하면 됨)
- **단점**
    - 하나의 스레드에 문제가 생기면 프로세스 전체가 영향 받음
    - 메모리를 공유함에 있어 **동기화 문제**가 발생할 수 있음

<br>

## 예상 질문

```
1. 정의
2. 필요성(역할)
3. 장단점
4. (예시)
5. 결론
```

<details>
    <summary><b>스레드에 대해 설명해주세요</b></summary>
    <br>
    스레드는 프로세스의 실행 단위로, 프로세스는 최소 하나 이상의 스레드를 가집니다.<br>
    하나의 프로세스가 수행해야 하는 작업을 스레드가 나누어 수행함으로써 프로세스의 처리 속도를 높이는 역할을 합니다.<br>
    스레드는 프로세스의 코드, 데이터, 힙 영역을 공유하고, 레지스터 및 스택 영역은 각 스레드마다 따로 할당 받습니다.<br>
    각 스레드가 메모리 공간을 공유하기 때문에 스레드간 통신 비용이 적어 문맥교환에 용이합니다.
</details>

<br>

<details>
    <summary><b>프로세스와 스레드의 차이에 대해 설명해주세요</b></summary>
    <br>
    프로세스는 실행중인 프로그램을 뜻하며 독립된 메모리 영역을 가져 프로세스는 서로 침범할 수 없습니다.<br>
    스레드는 프로세스의 실행 단위로 프로세스 메모리 영역 중 스택 영역을 제외한 부분을 공유합니다.
</details>

<br>

<details>
    <summary><b>멀티 프로세스와 멀티 스레드의 차이에 대해 설명해주세요</b></summary>
    <br>
    멀티 프로세스는 하나의 프로그램을 여러개의 프로세스로 구성하는 것으로, 프로세스는 독립된 메모리 영역을 가지고 서로 침범할 수 없습니다.<br>
    멀티 스레드는 하나의 프로세스가 여러개의 스레드로 구성하는 것을 뜻하며 프로세스 내부에서 메모리를 공유합니다.<br>
    이와 같은 자원공유 여부의 차이때문에 멀티 프로세스는 한 프로세스에 문제가 생겨도 다른 프로세스에는 영향을 끼치지 않지만, 멀티 스레드는 한 스레드가 문제가 생기면 프로세스 전체에 영향을 끼치게 되며 동기화 문제가 발생할 수 있습니다.<br>
    하지만 멀티 스레드의 경우 문맥 교환이 발생했을 때 스택 영역만 변경하면 되기에 오버헤드가 적게 발생하는 반면, 멀티 프로세스의 경우 메모리 영역 초기화 작업이 일어나기 때문에 오버헤드가 크게 발생합니다.
</details>

<br>

