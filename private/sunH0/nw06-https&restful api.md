
## HTTPS

### 배경
HTTP는 세가지 보안 문제가 있었다.
1. HTTP는 텍스트 교환이므로, 누군가 네트워크에서 신호를 가로채면 내용이 노출되는 보안 이슈가 존재한다. 
2. 통신 상대를 확인하지 않기 때문에 위장한 상대에게 요청,응답을 보낼 수도 있다.
3. 메시지의 내용이 변조되어 도착하는 중간자 공격을 막을 수 없다.

이런 보안 문제를 해결해주는 프로토콜이 HTTPS 이다.

### HTTPS(HyperText Transfer Protocol Secure)
Https는 기존 http프로토콜에 ssl 또는 tls계층을 추가하여 메세지 중 바디의 보안을 강화한 프로토콜 이다. (헤더는 암호화 되지 않는다.)
https는 공개키와 대칭키를 사용하여 메시지를 암호화하고, 인증서를 통해 통신 상대를 증명하며, 디지털 서명을 통해 데이터 위조를 확인할 수 있다.

+) SSL은 웹 서버와 사용자의 웹 브라우저 간 통신을 암호화 하는데 사용되는 프로토콜이다. TLS는 보안 및 개인 정보 보호 기능이 강화 된 후속 프로토콜이다.

 
- HTTPS는 HTTP와 다르게 기본 TCP/IP 443번 포트를 사용
- HTTP 는 원래 TCP 와 직접 통신했지만, HTTPS 에서 HTTP 는 SSL 과 통신하고 SSL 이 TCP 와 통신 하게 된다. 

### 대칭키와 공개키

- 대칭키 암호화 방식은 클라이언트와 서버가 동일한 키를 암호화, 복호화 모두 사용한다. 암호화한 정보를 보낼 때, 암호키도 함께 보내야한다. 이때, 중간에서 대칭키가 탈취당한다면 데이터 복호화가 가능하다는 위험이 있다. 하지만 연산 속도가 빠르다는 장점이 있다.

- 공개키 암호화 방식은 누구에게나 공개하는 공개키와 비밀키를 가지고 암호화를 진행한다. 클라이언트는 서버의 공개키로 메시지를 암호화하고 서버는 비밀키로 내용을 복호화한다. 비밀키를 전달하는 과정이 없어 안전한 방식이지만 처리 속도가 느리다. 

https는 **두 방식을 혼합하여 사용**한다. 안전한 키 교환을 위해 공개키 암호화 방식으로 대칭키를 교환하는 과정을 거치고 그 이후에는 대칭키로 통신한다.

### 인증서
https에서 통신상대를 확인할 때 인증서가 사용된다.

1. 서버는 서버의 정보와 공개키를 CA(제 3 인증기관)에 제출한다.
2. 인증기관에서는 공개키에 디지털 서명을하고 공개키를 담은 인증서를 CA 기업의 개인키로 암호화해서 발급해준다. 
3. 서버는 클라이언트의 요청이오면 암호화된 인증서를 전송하고, 클라이언트는 사전에 브라우저에 내장된 인증기관의 공개키를 사용해 복호화한다. 
4. 웹서버의 공개키를 인증기관이 진짜 인증했다는 사실을 파악하며 서버의 공개키를 신뢰할 수 있다.

+) 인증서에는 공개키의 내용(유효기간), 공개키의 암호화 알고리즘, 인증서를 발급한 CA, 서비스의 도메인에 대한 정보등이 있다.

### 디지털 서명
메시지의 위조를 검증하는데 사용한다. 송신자의 원본 데이터를 해싱하고 비밀키로 암호화한다. 암호화된 내용을 메시지에 추가해 전송하면 수신자는 송신자의 공개키로 암호화된 메시지를 복호화한다. 복호화된 메시지와 원본 데이터를 해싱한 결과가 같으면 데이터의 변조가 이뤄지지 않았다는 사실을 알 수 있다.

+) 발신자만이 공개키에 상응하는 개인키를 가지고 있기 때문이다.

### HTTPS의 장/단점

#### 장점
- 구글에서 https를 권장하므로 모바일 친화적 웹사이트에 유리하다.
- 네트워크 상에서 열람, 수정이 불가능하므로 안전하다.

#### 단점
- HTTPS도 무조건 안전한 것은 아니다. 예를들어 신뢰받는 CA 기업이 아닌 자체 인증서 발급한 경우, HTTPS지만 브라우저에서 주의 요함, 안전하지 않은 사이트와 같은 알림으로 주의 받게 된다.
- HTTPS는 설치 및 인증서를 유지하는 데 추가 비용이 발생
- 암호화하는 과정이 웹 서버에 부하를 준다. (HTTP에 비해 속도가 느리다)
  - 하지만 최근에는 하드웨어의 발달로 인해 HTTPS를 사용하더라도 속도 저하가 거의 일어나지 않으며, 새로운 표준인 HTTP 2.0을 함께 이용한다면 오히려 HTTPS가 HTTP보다 더 빠르게 동작한다.
- 인터넷의 연결이 끊긴 경우 재인증 시간이 소요된다.
  - HTTPS는 소켓 자체에서 인증을 하기 때문에 인터넷의 연결이 끊기면 소켓도 끊어져서 다시 HTTPS 재인증이 필요
  
## RESTful API

API(Application Programming Interface)는 일종의 소프트웨어 인터페이스이며 애플리캐이션 서로 간에 연결하여 통신할 수 있는 방법을 정의하는 기능의 집합이다. 
RESTful api 는 REST(Representational State Transfer) 디자인 원칙을 준수한 API이다.

 
### REST
자원을 이름(자원의 표현)으로 구분하여 해당 자원의 상태(정보)를 주고 받는 모든 것을 의미한다.

**즉, HTTP URI(Uniform Resource Identifier)를 통해 자원(Resource)을 명시하고, HTTP Method(POST, GET, PUT, DELETE)를 통해 해당 자원(URI)에 대한 CRUD Operation을 적용하는 것을 의미한다.**

+) CRUD Operation 은 대부분의 컴퓨터 소프트웨어가 가지는 기본적인 데이터 처리 기능인 Create(생성), Read(읽기), Update(수정), Delete(삭제)를 묶어서 일컫는 말이다.

- 자원(Resource) : HTTP URI (Client는 URI를 이용해서 자원을 지정하고 해당 자원의 상태(정보)에 대한 조작을 Server에 요청한다.)
- 자원에 대한 행위(Verb) : HTTP Method 
- 자원에 대한 행위의 내용 (Representations) : REST에서 하나의 자원은 JSON, XML, TEXT, RSS 등 여러 형태의 Representation으로 나타내어 질 수 있다.

### REST API 설계 기본 규칙
1. Uniform Interface(일관된 인터페이스)
URI로 지정한 Resource에 대한 조작을 통일되고 한정적인 인터페이스로 수행한다. 즉, 특정 언어나 기술에 종속되지 않는다.
 
2. Stateless(무상태성)
- 서버는 각각의 요청을 별개의 것으로 인식하고 처리해야하며, 이전 요청이 다음 요청에 연관되어서는 안된다. 즉 REST API는 서버측에서 클라이언트의 상태를 관리하지 않는다. 
- 서비스의 자유도가 높으며, 서버에서 불필요한 정보를 관리하지 않으므로 구현이 단순하다.

3. Cacheable(캐시 가능)
- Rest API는 결국 HTTP라는 기존의 웹표준을 그대로 사용하기 때문에, 웹의 기존 인프라를 그대로 활용할 수 있다.


4. Client-Server Architecture (서버-클라이언트 구조)
- 클라이언트는 유저와 관련된 처리를, 서버는 REST API를 제공함으로써 각각의 역활이 확실하게 구분되고 일괄적인 인터페이스로 분리되어 작동할 수 있게 한다. 
- 서로 간 의존성이 줄어든다.

5. Self-Descriptiveness(자체 표현)
JSON을 이용한 메시지 포멧을 이용하여 직관적으로 이해할 수 있고 REST API 메시지만으로 그 요청이 어떤 행위를 하는지 알 수 있다.

6. Layered System(계층 구조)
클라이언트와 서버가 분리되어 있기 때문에 중간에 프록시 서버, 암호화 계층 등 중간매체를 사용할 수 있어 자유도가 높다


### URI 설계 원칙
- URI는 명사를 사용한다.
- 슬래시로 계층 관계를 표현한다.
- URI의 마지막에는 슬래시를 붙이지 않는다.
- URI는 소문자로만 구성한다.
- 가독성이 떨어지는 경우 하이픈을 사용한다.


+) URL은 Uniform Resource Locator로 인터넷 상 자원의 위치( 어떤 파일의 위치)를 의미한다. 반면에 URI는 Uniform Resource Identifier로 인터넷 상의 자원을 식별하기 위한 문자열의 구성으로, URI는 URL을 포함하게 된다. 그러므로 URI가 보다 포괄적인 범위라고 할 수 있다.


