# HTTPS

### **HTTP 문제점**

1. 암호화 기능이 없다.
    
    단순 text 형식으로 주고 받기 때문에 중간에서 누군가 신호를 가로챈다면 내용이 그대로 노출된다.
    
2. 신뢰할 수 있는 사이트인지 확인이 불가하다.
    
    통신하려는 사이트를 따로 확인하는 작업이 없어서 다른 사이트가 통신하려는 사이트로 위장 가능하다
    
3. 통신 내용 변경가능
    
     요청을 보낸곳과 받은 곳의 리소스가 정확히 일치하는 지 확인할 수 없다.
    
- 기존의 이러한 문제점을 보완하기 위해 통신내용을 SSL이나 TSL 프로토콜을 통해  암호화 한다.
- 기본 TCP/IP 포트는 443이다.

### 암호화 방식

**공개키 방식**

A키로 암호화를 하면 B키로 복호화 할 수 있다.

B키로 암호화를 하면 A키로 복호화 할 수 있다.

- 둘중 하나를 개인키라고 부르고, 이것은 자신만 가지고 있는다
- 나머지 하나를 공개키라고 부르고, 타인에게 제공한다→ 공개키는 유출되어도 비공개 키를 모르면 복호화 할 수 없기 때문에 안전하다.
- 암호화 하는데 복잡해서 속도가 느리다는 단점이 있다.

**대칭키 방식**

- 동일한 키로 암호화, 복호화가 가능하다
- 대칭 키는 매번 랜덤으로 생성되어 유출되어도 다음에 사용할 때는 다른 키가 사용되기 때문에 안전하다.
- 공개키보다 빠르게 통신 할 수 있다.

### SSL

- HTTP 프로토콜 상위에 통신시 보안을 위한 SSL 관련 프로토콜이 있는 방식
- SSL프로토콜위에서 HTTPS 프로토콜이 동작한다.



### SSL 적용

SSL 방식을 적용하려면 인증서를 발급받아 서버에 적용시켜야 한다. 인증서는 사용자가 접속한 서버가 우리가 의도한 서버가 맞는지를 보장하는 역할을 한다. 인증서를 발급하는 기관을 CA라고 부른다.

**동작 방식**



1. 서버는 공개키와 개인키를 만들고 신뢰할 수 있는 인증기관 (CA)에 자신의 정보와 공개키를 관리해달라고 계약하고 돈을 지불한다.
2. 인증기관(CA)만의 공개키와 개인키가 있다. 인증기관은 사이트가 제출된 데이터를 검증하고 **인증 기관의 개인키로 사이트에서 제출한 정보를 암호화 해서** 인증서를 만들어 제공한다.→ 사이트는 인증서를 가지게 된다.
3. 인증기관은 웹 브라우저에게 자신의 공개키를 제공한다. 



4. 클라이언트가 사이트에 접속하게 되면 서버는 자신의 인증서를 웹 브라우저에게 보낸다. 
    1. 서버의 정보를 인증기관의 개인키로 암호화한 인증서를 받게 된다.
5. 웹 브라우저는 3에서 미리 알고 있는 인증기관의 공개키로 인증서를 해독하여 검증한다.→ 서버의 정보와 서버의 공개키를 알 수 있게 된다.
    1. 웹 브라우저는 내부적으로 CA 리스트와 함께 공개키가 포함된 인증서를 가지고 있다.
6. 서버의 공개키로 대칭키를 암호화 하여 다시 사이트에 보낸다.
7. 서버는 개인키로 암호문을 해독하여 대칭키를 얻게 되고, 얻어진 대칭키로 데이터를 주고받을 수 있게 된다.



### SSL 인증서

- 클라이언트와 서버간의 통신을 제 3자가 보증해주는 전자화된 문서

**언제**

- 클라이언트가 서버에 접속한 직후에 서버는 클라이언트에게 인증서 정보를 전달하게 된다.
- 클라이언트는 이 인증서 정보가 신뢰할 수 있는 것인지 검증한 후 다음 절차를 수행하게 된다.

**인증서의 역할**

- 클라이언트가 접속한 서버가 **신뢰할 수 있는 서버**임을 보장한다.
- SSL 통신에 사용할 공개키를 클라이언트에게 제공한다.

**인증서의 내용**

- 서비스의 정보
    - 클라이언트가 접속한 서버가 신뢰할 수 있는 서버임을 보장하는 역할에 사용한다.
- 서버측 공개키
    - 서비스의 도메인, 공개키와 같은 정보는 서비스가 CA로 부터 인증서를 구입할 때 제출하고, CA에 의해 암호화 해서 저장한다.

# REST API

- API: 하나의 애플리케이션이나 서비스가 다른 애플리케이션이나 서비스내의 리소스에 액세스 할수 있도록 해주는 매커니즘
    - 클라이언트: 액세스를 수행하는 애플리케이션이나 서비스
    - 서버: 리소스가 포함된 애플리케이션이나 서비스
- HTTP자원(URI)을 이용하고 행위(HTTP 메소드)에 대해 표현하도록 설계하는 것이다.
- REST API는 REST아기텍처 스타일의 디자인을 준수하는 API이다. RESTful API라고 불르기도 한다.

### REST API 필요성

1. 분산 시스템
    1. 거대한 애플리케이션을 모듈, 기능별로 분리하기 쉬워짐에 따라 RESTful한 서비스에서 다른 모듈이나 애플리케이션이더라도 RESTful API를 통해 통신할 수 있다.
2. 웹 브라우저외의 클라이언트
    1. 웹 페이지를 위해 HTML 및 이미지를 보내는 것과 달리 이제는 데이터만 보내면 여러 클라이언트에서 해당 데이터를 적절히 보여주기만 하면 된다.

### REST의 특징

1. 동일한 인터페이스
    1. URI로 지정한 리소스에 대한 조작을 통일되고 한정적인 인터페이스로 수행한다.
2. 클라이언트- 서버 분리
    1. REST API에서 서버와 클라이언트는 완전히 독립된 상태여야한다.
    2. 서버는 API 제공 역할을 한다.
    3. 클라이언트는 사용자 인증이나 세션, 로그인 정보등을 직접 관리하는 역할을 한다
3. Stateless
    1. REST API는 서버에서 요청 받는 것만 처리하고, 클라이언트에 대한 정보를  저장/유지하지 않는다.
4. 캐싱 가능
    1. 가능한 경우 리소스는 클라이언트 또는 서버측에서 캐시가 가능해야한다. 
    2. 서버 응답에는 전달된 리소스에 대해 캐싱이 허용되는지 여부에 대한 정보도 포함해야한다.
5. 계층 구조 아키텍처
    1. REST API에서의 요청과 응답은 서로 다른 계층을 거친다. 따라서 통신과정에서 다른 중개자가 있을 수 있다.
    2. 클라이언트나 서버는 중개자가 있는 사실을 몰라야한다.

### REST API 디자인

1. URI는 정보의 자원을 표현해야한다,
2. 자원에 대한 행위는 HTTP 메소드로 표현한다.

### REST API 작동 방식

1. HTTP 요청을 통해 통신함으로써 리소스 내에서 CRUD등의 표준 데이터 베이스 기능을 수행한다.
2. 모든 HTTP 메소드는 API 호출에서 사용될 수 있다. 
3. 리소스는 JSON,HTML,일반 텍스트를 포함하여 거의 모든 형식으로 클라이언트에 전달될 수 있다.

### REST 장점

- OPEN API를 제공하기 쉽다.
- 원하는 타입의 데이터를 주고 받을 수 있다.
- 기존의 웹 인프라를 그대로 사용할 수 있다.
- 사용이 쉽다.
- 요청에 독립적이라 세션을 이용하지 않는다.
- 지원하는 프레임 워크 혹은 언어등이 없어도 구현이 가능하다.

### REST 단점

- 표준이 없다.
- HTTP 프로토콜 모델에만 지원이 가능하다.
- 클라이언트-서버(P2P)가 아닌 분산환경에 유용하지 않다.