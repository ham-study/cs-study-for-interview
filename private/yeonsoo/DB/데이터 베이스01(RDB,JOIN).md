# 관계형 데이터베이스

## 데이터 베이스를 사용하는 이유

이전 파일 시스템에서는 

- **데이터의 중복성**으로 인해 저장공간이 낭비되고 **데이터의 일관성**을 유지하기가 힘들었다. 따라서 **데이터의 무결성**을 유지하기 어려웠다.
- **데이터의 종속성**으로 인해 데이터의 구조를 바꾸면 프로그램자체를 변경시켜야 하는 문제가 발생했다

이를 해결하기 위해 데이터 베이스를 사용한다.

### 데이터 베이스란

여러 사용자 혹은 응용프로그램이 **공유**하여 사용할 수 있도록 **통합**해서 **저장한 운영데이터**의 집합이다.

## 관계형 데이터 베이스의 개념과 장단점

### 개념

데이터를 구조화된 여러 테이블들로 저장되어있는 형태이다.

### 구조

1. 릴레이션
    - 하나의 개체에 관해서 하나의 테이블 구조로 저장 한것
    - 튜플의 집합으로 구성되어 있다.
    - 논리 데이터 모델링에서는 entity, 관계형 데이터 베이스에서는 테이블, 관계형 모델 이론에서는 릴레이션이라 불린다.
2. 속성
    - entity를 구성하는 논리적 단위
    - 테이블에서 하나의 컬럼에 대응된다.
3. 튜플
    - 속성들의 집합으로 구성되어 있다.
    - 테이블에 있는 각각의 행을 의미한다.
4. 도메인
    - 한개의 속성이 가질 수 있는 값들의 집합
    - 예) 성별이라는 속성의 도메인: 남,여
    

### 장점

- 테이블 형태의 단순한 구조
- 중첩된 복잡한 구조가 없다.
- 데이터의 일관성을 보장해준다
- 복잡한 형태의 쿼리가 가능하여 원하는 데이터를 추출할 수 있다.

### 단점

- 테이블간의 관계를 맺는 과정이 굉장히 복잡하다
- 대량의 데이터 입력 조회시 성능이 저하된다.
- 테이블 구조의 변경시 많은 제약사항이 생긴다
- 대규모의 비정형 데이터들이 늘어나게 되어 RDB만으로는 처리하기 힘든 상황이 발생한다.

## DML, DDL, DCL

### DDL

- 데이터 베이스나 테이블 등을 생성, 삭제하거나 구조를 변경하기 위한 명령어
- ex) CREATE,ALTER,DROP

### DML

- 데이터 베이스에 저장된 데이터를 처리하거나 조회, 검색하기 위한 명령어
- ex) INSERT,UPDATE,DELETE,SELECT

### DCL

- 데이터베이스에 저장된 데이터를 관리하기 위하여 데이터의 보안성 및 무결성등을 제어하기 위한 명령어\
- ex) GRANT,REVOKE

## Key

### 슈퍼키

- 튜플을 유일하게 식별할 수 있는 하나의 속성 혹은 속성의 집합
- 유일성을 만족해야한다

### 후보키

- 튜플을 유일하게 식별할 수 있는 속성의 최소 집합
- 유일성과 최소성을 만족해야한다.

### 기본키

- 테이블에서 특정 레코드를 구별하기 위해 후보키 중에서 선택된 고유한 식별자
- 유일성과 최소성을 만족해야한다.
- NULL값을 가질 수 없다
- 고려사항
    - 값이 자주 변경되지 않는 것을 선택→ NULL 체크 빈도수 고려
    - 값이 단순한 것을 선택→ 기본키 비교 비용 고려

### 대체키

- 기본키로 선정되지 않은 후보키

### 외래키

- 다른 릴레이션의 기본키를 참조하는 속성

# Join

## JOIN이란

두 개 이상의 테이블을 결합하여 데이터를 검색하는 방법이다. 

 정규화 단계를 통해 나누어진 테이블들 중에 관계가 있는 테이블들을 결합하여 검색 할 수 있다.

### INNER JOIN

- 테이블의 컬럼 값을 비교 후  조건에 맞는 값을 가져오는 것이다.
- 교집합 부분만 검색하는 조인이다.

### OUTER JOIN

- 조인하는 여러 테이블에서 한 쪽에는 데이터가 있고 한 쪽에는 데이터가 없는 경우, 있는 쪽 테이블의 내용을 전부 가져오는 방법이다.
- 조인 조건에 만족하지 않아도 해당 행을 출력하고 싶을 때 사용할 수 있다.

**LEFT JOIN**

- 왼쪽 테이블의 모든 레코드를 가져오고, 오른쪽 테이블은 매칭되는 레코드만 가져온다.
- 왼쪽 테이블에만 값이 있는 경우 오른쪽 테이블에 있는 값은 NULL로 표시된다.

**RIGHT JOIN**

- 오른쪽 테이블의 모든 레코드를 가져오고, 왼쪽 테이블은 매칭되는 레코드만 가져온다.
- 오른쪽 테이블에만 값이 있는 경우, 오른쪽 테이블에 있는 값은 NULL로 표시된다.

**FULL JOIN**

- left join 과 right join을 합친것이다.
- 양쪽 모두 조건이 일치하지 않는 것이라도 모두 결합하여 출력한다.
- 합집합이다.

### CROSS JOIN

- 카디션 곱이라고 하며 조인되는 두 테이블에서 곱집합을 반환한다.
- m행을 가진 테이블과 n 행을 가진 테이블이 교차 조인 되면 m*n개의 행을 생성한다.

### SELF JOIN

- 테이블에서 자기 자신을 조인 시킨다.