## 메모리 관리 필요성

프로세스들은 각자 독립된 메모리 역역을 갖고 있어서, 다른 메모리 영역에 접근할 수 없습니다. 오로지 운영체제 만이 운영체제 메모리 영역과 사용자 메모리 영역의 접근에 제약을 받지 않기 때문에 운영체제에서 메모리를 관리합닏. 또한, 한정된 메모리를 효율적으로 사용해야 했기 때문에, 운영체제가 메모리를 관리하는 방법이 중요해졌습니다.

![image-20220114125630767](C:\Users\taehy\AppData\Roaming\Typora\typora-user-images\image-20220114125630767.png)

## 고정 분할 방식

고정 분할 방식은 메모리 전체 공간을 임의의 크기로 분할하여 프로세스를 분한할 공간에 할당하는 기법입니다. 메모리를 분할한 크기는 서로 다를 수 있지만 한 번 분할된 메모리는 변경되지 않고 고정되어 있습니다.

메모리를 일정한 크기로 나누기 때문에 메모리 관리가 편하다는 장점이 있지만, 내부 단편화로 낭비되는 메모리가 발생한다는 문제가 있습니다.

## 가변 분할 방식

프로세스의 크기에 따라 메모리를 다르게 나누는 방법입니다. 이 방식은 프로세스를 한 덩어리로 처리하여 하나의 프로세스를 연속된 공간에 배치한다는 장점이 있지만, 외부 단편화 문제가 발생할 수 있습니다.

가변 분할 방식에서는 프로세스를 적재할 수 있는 빈 공간이 여러 개가 존재할 경우 어떤 공간에 배치할지 정하는 기법들이 있습니다.

First-Fit

- 제일 처음 발견된 공간에 프로세스를 배치합니다.
- 빈 공간을 탐색할 시간을 줄일 수 있지만 단편화를 고려하지 않아도 됩니다.

Best-Fit

- 메모리의 빈 공간을 모두 탐색한 후 프로세스가 적재될 수 있는 공간 중에서 가장 작은 공간에 배치합니다.
- 가장 큰 메모리 공간은 항상 확보하기 때문에 다음에 크기가 큰 프로세스를 적재하기 쉽고 단편화의 크기를 최대한 줄일 수 있지만 탐색하는 시간이 필요하고, 작은 크기의 분할이 많이 생겨서 외부 단편화 현상이 자주 발생합니다.

Worst-Fit

- Best-Fit과 반대로 가장 큰 공간에 프로세스를 배치합니다. 외부 단편화를 최소화 할 수는 있지만 이 역시 탐색하는 시간이 소요되고, Best-Fit과 반대로 다음 순서로 크기가 큰 프로세스를 적재하기 힘들다는 단점이 있습니다.

## **메모리 단편화**

메모리 단편화란 메모리의 공간이 작은 조각으로 쪼개져 사용가능한 메모리가 존재는 하지만 할당이 불가능한 상태를 말합니다. 메모리 단편화는 내부 단편화와 외부 단편화로 구분됩니다.

내부 단편화는 메모리를 할당할 때 프로세스가 필요한 양보다 더 큰 메모리가 할당되어서 프로세스에서 사용하는 메모리 공간이 낭비되는 상황입니다.

외부 단편화는 메모리가 할당되고 해제되는 작업이 반복될 때, 작은 메모리가 중간중간 존재하는데, 이런 메모리가 많이 존재해서 총 메모리 공간은 충분하지만 실제로 할당할 수 없는 상황입니다.

이런 외부 단편화 현상을 해결하기 위해 다음의 방법을 사용합니다.

- 메모리 합병
- 메모리 집약

메모리 합병이란 인접한 빈 공간이 발생할 때마다 합쳐서 보다 큰 공간으로 만드는 것입니다.

즉 프로세스가 종료되어 메모리를 반환하여 생기는 빈공간이 서로 붙어 있게 되면 이 공간을은 하나로 합쳐서 외부 단편화 현상을 줄입니다.

메모리 집약은 흩어져있는 모든 빈 공간을 주기적으로 합쳐서 하나의 커다란 빈 공간으로 만드는 것입니다.

## 32bit vs 64bit

bit는 CPUT가 처리하는 데이터의 최소 단위의 크기가 몇 bit인지를 나타내는 말입니다.

일단 기본처리 단위가 다르다보니, 프로세서의 레지스터의 크기부터 차이가 납니다. 32비트 프로세서의 범용 레지스터의 크기는 32비트 즉 4바이트이고, 64비트 프로세서의 범용 레지스터의 크기는 64비트, 즉 8바이트입니다.

메모리의 주소 모드는 기본적으로 바이트당 주소를 하나 할당하는 방식이어서 32bit 머신은 최대 32bit 의 메모리를 다룰 수 있습니다. 그러면 2^32의 메모리 공간을 갖게 되는데, 이는 4GB에 해당합니다. 따라서, 32bit 머신은 최대 4GB의 메모리만 사용할 수 있습니다.

64bit 머신은 2^64가 아니라 하위 48bit만 사용해서 약 256TB에 해당하는 메모리를 다룰 수 있습니다.