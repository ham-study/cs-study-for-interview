## 프로세스 개념

**프로그램과 프로세스**

프로그램은 보조 기억장치에 존재하며 실행되기를 기다리는 명령어와 데이터의 묶음이다. 이렇게 하드디스크에 있는 프로그램을 실행하면, 실행을 위해서 메모리가 할당되고 할당된 메모리 공간으로 바이너리 코드가 올라간다. 즉, 실행중인 프로그램을 프로세스라 한다.



## 프로세스 상태

![content01](https://eunhyejung.github.io/assets/contents/content07.PNG)

프로세스의 상태는 new, ready, running, waiting, terminated 상태가 있다.

New

- 프로세스가 메모리를 할당받고 실행할 준비가 끝난 상태. 프로세스가 생성되면 고유의 PCB도 생성된다.

Ready

- 프로세스가 실행되기 위해서 CPU를 할당받기 전까지 대기하는 상태

Running

- CPUT에서 수행이 되고 있는 상태

Wainting

- I/O 작업이 완료될 때까지 기다리고 있는 상태.

Terminated

- 프로세스의 작업이 종료된 상태. 프로세스가 완료되면 PCB도 제거된다.



- new -> ready : new 상태에서 프로세스가 생성되면 OS 커널에 존재하는 Ready Queue에 올라간다.
- ready -> running : Ready Queue에 있는 프로세스들을 OS가 스케쥴링 알고리즘을 통해 Running 상태로 가야할 프로세스에 CPU를 할당한다. 그러면 Running 상태가 된다.
- running -> ready : 현재 running 상태에 있는 프로세스 A보다 Ready Queue에 있는 프로세스 B의 우선순위가 높으면, A는 ready 상태가 되고 B가 running 상태가 된다.
- running -> waiting: 현재 running 상태인 프로세스 A에서 I/O 작업이 발생하면 blocked 상태로 가게 된다.
- waiting-> ready : I/O 작업이 종료된 프로세스는 다시 ready 상태가 된다.
- running -> terminate : 프로세스 종료



## 프로세스 제어 블록

프로세스 제어 블록은 운영체제가 프로세스를 제어하기 위해 정보를 저장해 놓는 곳이다. 즉, 프로세스의 상태 정보를 저장하는 자료구조이다.

프로세스가 생성될 때마다 고유의 PCB가 생성되고, 프로세스가 완료되면 PCB도 제거된다.

![img](https://blog.kakaocdn.net/dn/tIPDr/btqUnKRlmuB/DJIs4kFAwQE5ySaiJz25Kk/img.png)

일반적으로 PCB는 위와 같은 정보가 포함된다.

- 포인터 : 프로세스의 현재 위치를 저장하는 포인터 정보이다
- 프로세스 상태 : 프로세스의 상태를 저장한다.
- 프로세스 번호 : 모든 프로세스에는 프로세스 식별자를 저장하는 PID라는 고유한 ID가 할당된다.
- 프로그램 카운터 : 프로세스에서 실행될 다음 명령어의 주소를 저장하는 카운터이다.
- 레지스터 : 범용 레지스터를 포함하는 CPU 레지스터에 있는 정보이다.
- 메모리 제한 : 운영체제에서 사용하는 메모리 관리 시스템에 대한 정보가 포함된다. 여기에는 페이지 테이블, 세그먼트 테이블 등이 포함된다.
- 열린 파일 목록 : 이 정보에는 프로세스를 위해 열린 파일 목록이 포함된다.



운영체제는 빠르게 PCB에 접근하기 위해 프로세스 테이블을 사용하여 각 프로세스의 PCB를 관리한다.

![img](https://blog.kakaocdn.net/dn/5tmZc/btqUnLvQf0W/PVZ1TLoN3mEWk5YkjLUd90/img.png)



## 프로세스 문맥 교환

문맥 교환 : 프로세스 문맥 교환(컨텍스트 스위칭)은 CPU에서 실행중인 프로세스를 중단하고, 다음 우선순위의 프로세스를 처리하기 위해 프로세스의 상태를 교체하는 작업이다. 

프로세스의 문맥 : 시분할 환경에서 프로세스는 실행과 중단을 반복한다. 이 때, 프로세스 중단시에는 다시 실행할 것을 대비해 저장해놓는 프로세스의 모든 실행정보를 문맥이라고 한다.



**문맥교환 진행 방식**

- Task의 대부분 정보는 Register에 저장되고 PCB로 관리된다.
- 현재 실행하고 있는 Task의 PCB 정보를 저장한다.
- 다음 실행할 Task의 PCB 정보를 읽어 Register에 적재하고 CPU가 이전에 진행했던 과정에 이어서 다음 작업을 수행한다.

