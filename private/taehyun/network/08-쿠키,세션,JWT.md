HTTP는 기본적으로 statelss하기 때문에 사용자를 기억하지 않습니다. 그래서 지금 요청한 사용자가 이전에 요청한 사용자인지 구분할 수가 없는데 이를 쿠키와 세션이 해결해줍니다. 쿠키와 세션은 일정시간동안 동일한 클라이언트로부터 들어오는 여러 요청들을 연속적인 하나의 상태로 관리할 수 있게 해줍니다.

**세션**

세션은 서버에 데이터를 저장하는 것으로 클라이언트에 세션 키 값을 발급해주고 클라이언트는 요청할 때마다 키 값을 헤더에 넣어서 서버에 전달하는 방식으로 동작합니다. 서버에 저장되기 때문에 보안상 안전하지만 사용자가 증가할수록 서버의 리소스를 차지하게 되고 만약 서버가 여러 대로 늘어나면 세션 서버를 따로 구축해야 합니다.

**쿠키**

쿠키는 서버가 아닌 클라이언트에 저장됩니다. 클라이언트에 저장되기 때문에 서버의 자원은 차지하지 않지만 보안에 취약하고 얼마든지 데이터를 위조할 수 있다는 단점이 있습니다.

**세션 기반 인증과 토큰 기반 인증의 차이점**

세션 기반 인증은 사용자 인증 정보를 서버 내 메모리에 저장하는 방식이고 사용자가 증가할 수록 서버에서 관리하는 세션의 수가 증가하는 단점이 있습니다

이러한 단점을 극복하기 위해서 토큰기반 인증이 등장했습니다 토큰 자체로 인증을 진행하기 때문에 서버에 부하를 주지 않고 서버의 확장성 측면에서도 장점을 갖게 됩니다

반면 토큰을 강제로 만료 시킬 수 없어서 토큰을 탈취당하면 문제가 발생할 수 있습니다

**JWT**

JWT는 클라이언트와 서버간의 데이터 전송을 안전하게 할 수 있도록 해주는 기술입니다. 주로 로그인 방식에서 사용이 되는데 세션 기법과 달리 스스로 인증에 필요한 데이터를 갖고 있고 stateless한 성질 때문에 서버가 바뀌어도 인증이 가능하다는 특징이 있습니다.

JWT는 헤더, 페이로드, 시그니처로 구성되어 있습니다. 헤더에는 알고리즘 타입, 페이로드에는 데이터를 담고 시그니처를 통해서 검증합니다.

**단순한 JWT의 인증과정**

사용자가 로그인 요청을 보내면 access token과 refresh token를 생성하여 클라이언트에게 전달해줍니다. 이후 매 요청마다 access token을 헤더에 넣어서 요청을 하고 서버는 받은 token을 검증하다가 access token이 만료되면 클라이언트는 access token과 refresh token를 같이 보내서 새로운 access token을 발급받습니다.

**JWT가 세션보다 무조건 좋은 것인가?**

JWT를 사용하면 토큰만으로 유효성 검증이 가능하기 때문에 서버가 scale out 확장을 해도 사용할 수 있다는 장점은 있지만, 이미 발급해버린 토큰을 무효화 시킬 수 없다는 단점이 있습니다. 예를 들어, 한 기기에서만 로그인이 가능하도록 제한을 두고 싶은 경우 세션을 사용하면 컴퓨터에서 로그인 했다가 핸드폰에서 로그인하면 컴퓨터에서의 세션을 종료시켜 버리면 되지만 토큰은 불가능합니다. 또한, 토큰을 해커에게 탈취당해도 무효화 시킬 수 없다는 단점이 있습니다.