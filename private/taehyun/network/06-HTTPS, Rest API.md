## Rest API

REST API는 HTTP 통신에서 API요청을 Resource와 Method, Representation으로 표현한 형태로 전달하는 방식입니다.

이런 Rest API는 HTTP 표준 프로토콜에 따르는 모든 플랫폼에서 사용이 가능하고 REST API 메시지가 의도하는 바를 명확하게 나타내므로 의도를 파악하기 쉽다는 특징이 있습니다.

구성 요소로는 Resource와 Method, Representation 이 있습니다.

- Resource
  - 서버는 Unique한 ID를 가지는 Resource를 가지고 있으며, 클라이언트는 이러한 Resource에 요청을 보냅니다.
- Method
  - 서버에 요청을 보내기 위한 방식으로는 대표적으로 GET, POST, PUT, PATCH, DELETE가 있습니다. CRUD 연산에 대응하는 Method를 사용하여 서버에 요청을 보내야 합니다.
- Representation
  - 마지막으로 클라이언트와 서버가 데이터를 주고받는 형태는 json, xml 등이 있습니다. 최근에는 key, value를 활용하는 json을 주로 사용합니다.

**REST 디자인 원칙**

1. 균일한 인터페이스
   1. 요청이 어디서 오는지와 무관하게, 동일한 리소스에 대한 모든 API 요청은 동일하게 보여야 합니다.
2. 클라이언트 - 서버 디커플링
   1. REST API에서 클라이언트와 서버는 서로 완전히 독립적이어야 합니다. 클라이언트가 알아야 하는 유일한 정보는 요청된 리소스의 URI뿐입니다.
3. Stateless
   1. REST API는 stateless입니다. 이는 각 요청에서 필요한 모든 정보를 포함해야 한다는 의미입니다. 즉, REST API는 서버측 세션을 필요로 하지 않습니다.
4. 캐싱 가능성
   1. 리소스를 클라이언트나 서버측에서 캐싱할 수 있어야 합니다. 캐싱을 함으로써 서버측의 확장성이나 클라이언트의 성능 향상을 기대할 수 있습니다.
5. 계층 구조 아키텍처
   1. REST API에서는 호출과 응답과 과정에서 보안, 로드 밸런싱 등의 서로 다른 계층을 통과할 수 있습니다. REST API는 클라이언트가 중개자랑 통신하는지 End point 애플리케이션과 통신하는지 알 수 없도록 설계해야 합니다.

## HTTPS

HTTP는 평문 데이터를 전송하는 프로토콜이기 때문에 제3자에 의해 조회될 수 있습니다. 이러한 문제를 해결하기 위해 HTTP에 암호화를 추가한 것이 HTTPS 입니다. HTTPS는 SSL이나 TLS 프로토콜을 통해 데이터를 암호화하고 암호화 방식은 공개키 암호화 방식과 대칭키 암호화 방식을 같이 사용합니다.

이런 암호화 덕분에 보안상 안전하다는 장점은 있지만, 인증서를 유지해야 하는 비용이 들고 암호화, 복호화 과정 때문에 HTTP에 비해서 느리다는 단점이 있습니다.

**공개키 암호화 방식**

- A키로 암호화를 하면 B키로 복호화를 할 수 있습니다.
- B키로 암호화를 하면 A키로 복호화를 할 수 있습니다.
- 둘 중 하나를 비공개키(Private Key) 혹은 개인키라 부르며, 이는 자신만 가지고 있고 공개되지 않습니다.
- 나머지 하나를 공개키(Public Key)라고 부르며 타인에게 제공합니다. 공개키는 유출이 되어도 비공개키를 모르면 복호화 할 수 없기 때문에 안전합니다.
- 공개키 방식은 복호화 과정의 연산 속도가 대칭키 방식보다 느립니다.

**대칭키 암호화 방식**

- 동일한 키로 암호화, 복호화가 가능합니다.
- 공개키보다 빠르게 통신할 수 있습니다.
- 키를 전달할 때 노출될 수 있다는 위험이 있습니다.

**CA란?**

- CA는 공개키와 공개 DNS의 연결을 보장하는 기관입니다. 예를 들어, 클라이언트는 [www.example.com](http://www.example.com) 의 공개키가 진짜 공개키인지 아니면 피싱 사이트의 공개키인지 알 수 없습니다. 그래서 CA가 자신의 개인키로 웹 사이트의 공개키를 암호학적으로 사인함으로써 특정 공개키가 그 특정 사이트의 공개키라는 것을 보장합니다. 웹 브라우저는 내부적으로 CA 리스트와 함께 공개키가 포함된 인증서를 가지고 있기 때문에 이 과정이 가능합니다.

**동작 과정**

1. 사이트는 공개키와 개인키를 만들고, CA에 자신의 정보와 공개키 관리를 요청합니다.
2. CA는 사이트의 데이터를 검증하고 CA의 개인키로 제출한 데이터를 암호화해서 인증서를 만듭니다. 이제 사이트는 인증서를 갖게 됩니다.
3. CA는 웹 브라우저에게 자신의 공개키를 제공합니다.
4. 사용자가 사이트에 접속하면 사이트는 인증서를 사용자에게 보냅니다.
5. 웹 브라우저는 미리 알고 있던 인증기관의 공개키로 인증서를 해독합니다.
6. 이렇게 얻은 사이트의 공개키로 대칭키를 암호화해서 다시 사이트에 보냅니다.
7. 사이트는 개인키로 암호문을 해독하고 대칭키를 얻게 됩니다. 이제 대칭키로 데이터를 암호화하여 주고받을 수 있습니다.