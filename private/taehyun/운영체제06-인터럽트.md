## 인터럽트 개념

인터럽트는 프로그램을 실행하는 도중에 예기치 않은 상황이 발생할경우 현재 실행중인 작업을 즉시 중단하고 발생된 상황을 우선 처리한 후 실행중이던 작업으로 복귀하여 계속 처리하는것을 말합니다. 

## 동기적/비동기적 인터럽트

동기적인 인터럽트는 CPU가 명령어를 실행하는 과정에서 발생하는 것 말합니다.

비동기적 인터럽트는 다른 하드웨어 장치가 CPU 클럭의 신호와 관계없이 아무 때나 발생합니다.

비동기적 인터럽트는 입출력장치, 타이밍 장치, 전원 등 외부적인 요인에 의해 발생합니다.

동기적 인터럽트는 0으로 나누는 것과 같이 잘못된 명령이나 데이터를 사용할 때 발생합니다.

## 인터럽트 처리과정

1. 인터럽트 요청 발생
2. 프로그램 수행 중단
   1. 현재 수행중인 명령이 완료된 시점에서 중단
3. PC에 기억되어 있는 주소를 안전한 곳에 보존
4. 인터럽트 전처리 실행
5. 인터럽트 처리 루틴 수행
6. 보존시킨 PC의 값을 다시 PC에 저장
7. PC의 값을 이용해 인터럽트 발생 이전에 수행중이던 프로그램을 계속 실행

## 인터럽트와 이중모드

이중 동작 모드는 운영체제를 보호하기 위한 기법입니다.

사용자와 운영체제는 시스템 자원을 공유하는데 그렇기 때문에, 사용자에게 제한을 두지 않으면 사용자가 메모리 내의 주요 운영체제 자원을 망가뜨릴 수 있습니다. 즉, 운영체제의 원활한 작동을 위해서는 사용자가 시스템 자원에 접근하는 것을 제한하는 보호 장치가 필요합니다. 이러한 보호 장치가 바로 이중 동작 모드(dual-mode operation)입니다.

**이중모드의 구조**

![](https://t1.daumcdn.net/cfile/tistory/9909C5395BA80FD907)

이중 동작 모드는 사용자 모드와 커널 모드로 구성되어 있습니다. 커널 모드는 사용자를 위한 동작과 운영체제를 위한 동작을 담당한다. 이중 동작 모드를 통해서 사용자 모드에서는 불법적인 명령을 하지 못하게 막아줍니다.

사용자가 사용하는 응용 프로그램은 사용자 모드에서 작동합니다. 그러다가, 해당 프로그램이 운영체제에게 시스템 사용을 요청하게 되면 커널 모드로 바뀌고 요청된 시스템을 실행한 뒤에, 다시 사용자 모드로 전환합니다.

이 커널 모드와 사용자 모드를 구분 짓기 위해서 모드 비트(mode bit)라고 하는 하나의 비트가 있습니다. 이 비트는 커널 모드(0) 또는 사용자 모드(1)를 나타냅니다.

시스템 부트 시 하드웨어는 커널 모드에서 시작합니다. 이어 운영체제가 적재되고, 사용자 모드에서 사용자 프로세스가 시작됩니다. 트랩이나 인터럽트가 발생할 때마다 하드웨어는 사용자 모드에서 커널 모드로 전환합니다. 그러므로 운영체제가 컴퓨터의 제어를 얻을 때마다 항상 커널 모드에 있게 됩니다. 시스템은 사용자 프로그램으로 제어를 넘기기 전에 항상 사용자 모드(모드 비트 1로 설정)로 전환합니다.

## DMA

DMA는 주변 장치들이 CPU의 개입없이 메모리에 직접 접근하여 읽고 쓰기를 할 수 있게 해주는 기능입니다.

I/O 요청이 많을 경우 빈번한 인터럽트가 발생하는데 DMA를 사용함으로써 프로그램 수행 중 인터럽트의 발생 횟수를 최소화시킬 수 있습니다.

CPU는 DMA 컨트롤러와 상태정보 및 제어정보만 전송하여, CPU의 개입없이 입출력장치와 주 기억장치 사이에 데이터를 직접 전송할 수 있습니다.