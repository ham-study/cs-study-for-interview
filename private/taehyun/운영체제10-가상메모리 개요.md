## 가상 메모리 정의

가상 메모리는 RAM의 부족한 용량을 보완하기 위해, 각 프로그램에 실제 메모리 주소가 아닌 가상의 메모리 주소를 할당하는 방식입니다. OS는 프로세스들의 페이지 중에서 중요한 것들을 메모리에, 덜 중요한 것들을 디스크에 옮겨 놓습니다.

가상 메모리에서 각 프로그램은 자신의 고유한 주소 공간을 가지며 주소 공간은 페이지들로 구성됩니다. 각 페이지는 연속된 주소를 갖고 프로그램이 실행되면 페이지들은 물리 메모리에 매핑됩니다.

## 가상 메모리 필요성

여러 응용 프로그램들의 크기를 모두 합치면 메모리의 크기보다 더 커지는 경우에도 이 프로그램들을 동시에 메모리에서 실행시킬 수 있어야 하기 때문에 가상 메모리 방식이 필요합니다.

## 페이징 기법

보조기억장치를 이용하여 가상메모리를 같은 크기의 블록으로 나눈 것을 페이지라 하고 RAM을 페이지와 같은 크기로 나눈 것을 프레임이라고 할 때,, 페이징 기법은 사용하지 않은 프레임은 페이지로 옮기고, 필요 페이지를 프레임에 옮기는 기법입니다. 페이지와 프레임을 대응시키기 위해 페이징 테이블을 만듭니다.

**페이지 폴트**

CPU는 프로세스를 실행하면서 페이지 테이블을 통해 페이지를 조회하는데, 실제 메모리에 원하는 페이지가 없는 것을 페이지 폴트라고 합니다. 페이지 폴트가 발생하면 가상메모리를 통해서 해당 데이터를 가져오게 됩니다. 가상메모리는 디스크에 저장되어 있기 때문에, 페이지 폴트가 발생하면 입출력에 의해 속도가 저하됩니다.

## 세그멘테이션 기법

세그멘테이션 기법에서는 가상메모리를 서로 크기가 다른 논리적 단위인 세그먼트로 분할해서 메모리를 할당합니다. 각 세그먼트들은 서로 다른 주소 공간으르 구성하기 때문에 각 세그먼트는 독립적으로 증가하거나 감소할 수 있습니다. 따라서, 크기가 각각 다르기 때문에 미리 분할해 둘 수 없고 메모리에 적재될 때 빈 공간을 찾아 할당합니다. 페이징 기법과 마찬가지로 mapping을 위해 세그먼트 테이블이 필요합니다.

**세그멘테이션은 왜 쓰는가?**

페이징에서의 가상 주소는 0부터 시작하고 순차적으로 증가하였습니다. 하지만 두 개 이상의 분리된 가상 주소 공간을 갖는 것이 하나의 주소 공간을 갖는 것보다 더 편리한 경우에는 적합하지 않습니다. 예를 들어, 컴파일러는 컴파일 도중 소스 텍스트, 심볼 테이블, 상수 테이블, 스택 등 여러 테이블을 생성합니다. 이 때, 한 프로그램이 매우 많은 변수를 사용하면 심볼 테이블의 메모리 부분은 가득차고 그러면 메모리의 다른 부분은 비어있음에도 불구하고 컴파일 과정을 중지할 것 입니다. 따라서, 하나의 주소 공간이 아닌 여러 개의 주소 공간을 사용하고 각 주소 공간은 독립적으로 증가, 감소해야 할 때 세그멘테이션이 적합합니다.